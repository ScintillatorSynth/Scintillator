language: cpp

dist: bionic
os: linux
compiler: clang

addons:
    apt:
        update: true
        packages: &common_packages
            - build-essential
            - clang-8
            - cmake
            - libc++-8-dev
            - libc++abi-8-dev
            - libxcursor-dev
            - libxi-dev
            - libxinerama-dev
            - libxrandr-dev
            - llvm-8-dev
            - python3-distutils

env:
    - CC=clang-8 CXX=clang++-8

before_install:

before_script:
    - mkdir build && cd build
    - cmake -DCMAKE_BUILD_TYPE=Coverage -DSCIN_USE_SWIFTSHADER=ON -DPYTHON_EXECUTABLE=`which python3` ..

script:
    - make run_unittests
    - src/run_unittests

